
<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>医生信息管理</title>

		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
	</head>
	<link rel="stylesheet" type="text/css" href="../../css/bootstrap.min.css" />
	<link rel="stylesheet" href="../../css/sweetalert.css" type="text/css">
	<link rel="stylesheet" type="text/css" href="../../css/common.css" />
	<link rel="stylesheet" type="text/css" href="../../css/doctorInfo.css" />
	<!--<link rel="stylesheet" type="text/css" href="../../css/commonStyle.css" />-->
	<!--<link rel="stylesheet" type="text/css" href="../../css/jcDate.css"/>-->

	<body>
		<div class="doctorInfoBox">
			<!--第一行信息-->
			<div class="doctorInfoHead">
				<!--<div class="doctorSex">
					<span class="doctorSexLeft">医院</span>
					<select name="" class="doctorSexRight"id="doctorInfoSearchHos">
						
					</select>
				</div>-->

				<!--<div class="doctorSex">
					<span class="doctorSexLeft">科室</span>
					<select name="" class="doctorSexRight"id="doctorInfoSearchTechOffice">
						
					</select>
				</div>-->
				<div class="doctorNanme">
					<span class="doctorNanmeLeft">姓名</span>
					<input class="doctorNanmeRight" type="text" id="doctorInfoSearchName" value="" />
				</div>
				<div class="doctorNanme">
					<span class="doctorNanmeLeft">邀请门店</span>
					<select class="doctorNanmeRight" id="inviteStore" name="inviteStore">
					</select>
				</div>
				<button class="doctorBtnCheck"id="doctorSearchBtns">查询</button>
				<button class="doctorBtnClear"id="doctorSearchClearData">清空</button>
				<button class="doctorBtnAdd">新增</button>
			</div>
			<!--信息列表-->
			<div class="doctorInfoList">
				<ul class="doctorInfoList-ul">
					<!--<li class="doctorInfoList-all">全选</li>-->
					<li class="doctorInfoList-code LiTextAlign">序号</li>
					<li class="doctorInfoList-name LiTextAlign">组织机构</li>
					<!--<li class="doctorInfoList-sex">医院科室</li>-->
					<li class="doctorInfoList-id LiTextAlign">用户姓名</li>
					<li class="doctorInfoList-tel LiTextAlign">用户账号</li>
					<li class="doctorInfoList-tel LiTextAlign">联系电话</li>
					<li class="doctorInfoList-tel LiTextAlign">邀请门店</li>
					<li class="doctorInfoList-des LiTextAlign">用户描述</li>
					<li class="doctorInfoList-check LiTextAlign">操作</li>
					<!--<li class="doctorInfoList-change LiTextAlign">修改</li>-->
					<!--<li class="doctorInfoList-del LiTextAlign">删除</li>-->
				</ul>
				<!--医生信息列表内容区-->
				<div id="doctorContentList">
					<!--<ul class="doctorInfoDetail-ul">
					<li class="doctorInfoDetail-radio"><label class="radio"><input type="radio" name="radio" id="" value="" class="radioclass"/><i></i></label></li>
					<li class="doctorInfoDetail-code"><span>1</span></li>
					<li class="doctorInfoDetail-name"><span>天津医科大学总医院</span></li>
					<li class="doctorInfoDetail-sex"><span>心内科</span></li>
					<li class="doctorInfoDetail-id"><span>王医生</span></li>
					<li class="doctorInfoDetail-tel"><span>13612345678</span></li>
					<li class="doctorDescript"><span>副主任医师，擅长治疗心内疾病，30年临床经验</span></li>
					<li class="doctorInfoDetail-check"><a href = "javascript:void(0)" class="btn-check"><img src="../../img/common/untitledSearBtn.png"/></a></li>
					<li class="doctorInfoDetail-change"><a href = "javascript:void(0)" class="btn-change"><img src="../../img/common/untitledChangeBtn.png"/></a></li>
					<li class="doctorInfoDetail-del"><a href = "javascript:void(0)" class="btn-del"><img src="../../img/common/untitledDelBtn.png"/></a></li>
				</ul>-->
				</div>

			</div>
			<div class="clearfix"></div>
			<!--分页-->
			<div class="doctorpageN"></div>

			<!--患者信息查询-->

			<div id="doctorlight1" class="white_content">
				<div class="white_contentHead">
					<span class="infoTitle">用户信息查询</span>
					<a id="close"class="close" href="javascript:void(0)" onclick="document.getElementById('doctorlight1').style.display='none';document.getElementById('fade').style.display='none'">&times;</a>
				</div>
				<div class="infoDetails"style="overflow: hidden;">
					<div class="infoDetailsHead">用户信息查询</div>
					<ul class="infoDetails-ul">
						<!--<li><span class="infoDetails-title">用户类型：</span><input type="text" name="" id="lookDoctorInfoUserType" value="" /></li>
						<li class="lookHosInfos"><span class="infoDetails-title">医院名称：</span><input type="text" name="" id="lookDoctorInfoHospName" value="医科大学总医院" /><input type="texts"class="hiddenLookDoctorInfoHospId" style="display: none;"/></li>
						<li class="lookOfficeInfos"><span class="infoDetails-title">科&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;室：</span><input type="text" name="" id="lookDoctorInfoTechOffice" value="心内科" /><input type="texts"class="hiddenLookDoctorInfoTechOId" style="display: none;"/></li>-->
						<li class="lookDeptInfos"><span class="infoDetails-title">部&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;门：</span><input type="text" name="" id="lookDoctorInfoDept" value="" /><input type="texts"class="hiddenLookDoctorInfoDeptId" style="display: none;"/></li>
						<li><span class="infoDetails-title">用户姓名：</span><input type="text" name="" id="lookDoctorInfoUserName" value="王医生" /></li>
						<li><span class="infoDetails-title">联系电话：</span><input type="text" name="" id="lookDoctorInfoTel" value="00000000000000" /></li>
						<li><span class="infoDetails-title">用户账号：</span><input type="text" name="" id="lookDoctorInfoUserCode" value="" /></li>
						<li><span class="infoDetails-title">邀请门店：</span><input type="text" name="" id="inviteStoreRes" value="" /></li>
						<li class="liBig"><span class="infoDetails-title lf">用户描述：</span><textarea type="text" name="" id="lookDoctorInfoDetail"class="lf" value="副主任医师等等" maxlength="500" placeholder="最多不超过500字"/></textarea></li>
						<!--<li class="liBig"><span class="infoDetails-title">过敏史：</span><input type="text" name="" id="" value="冠心病，高血压，心脏病，三高，前列腺炎，胸闷气短，憋气压抑等" /></li>-->
					</ul>

				</div>
				<!--<button id="infoDetails-close">关闭</button>-->
				<a id="close2" href="javascript:void(0)" onclick="document.getElementById('doctorlight1').style.display='none';document.getElementById('fade').style.display='none'">关闭</a>
			</div>

			<!--删除-->

			<div id="doctorlight2" class="white_content1">
				<div class="white_contentHead1">
					<img src="../../img/common/untitledquestionImg.png" />
				</div>
				<p>删除信息后不可恢复，您确定要删除该信息吗？</p>
				<a id="close3" href="javascript:void(0)" onclick="document.getElementById('doctorlight2').style.display='none';document.getElementById('fade').style.display='none'">取消</a>
				<div class="delHiddenListId"style="display: none;"></div>
				<button id="del-yes">确定删除</button>
			</div>

			<!--医生新增-->
			<div id="doctorlight4" class="white_content">
				<div class="white_contentHead">
					<span class="infoTitle">用户新增</span>
					<a id="close" class="close"href="javascript:void(0)" onclick="document.getElementById('doctorlight4').style.display='none';document.getElementById('addDoctorInfoDeptLay').style.display='none';document.getElementById('fade').style.display='none'">&times;</a>
				</div>
				<div class="infoDetails">
					<div class="infoDetailsHead">用户新增信息</div>
					<ul class="infoDetails-ul">
						<!--<li class="doctorSelectUserIdentity">
							<span class="infoDetails-title">用户身份：
                			<select name="" style="width: 70%;height: 30px;"id="addDoctorInfoUserInfo">
                				<option value="1"selected="selected">医生</option>
                				<option value="2">服务人员</option>
                				<option value="3">患者</option>
                				<option value="4">村医</option>
                			</select>
                		</li>
                		<li class="AddDoctorInfohospitalName"><span class="infoDetails-title">医院名称：
                			<select name="" style="width: 70%;height: 30px;"id="addDoctorInfoHspName">
                				
                			</select>
                		</li>
                		<li class="AddDoctorInfoTechOffice"><span class="infoDetails-title">科&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;室：
                			<select name="" style="width: 70%;height: 30px;"id="addDoctorInfoTechOffice">
                				
                			</select>
                		</li>-->
                		<li class="AddDoctorInfoChoseDept">
                			<span class="infoDetails-title">机构：</span><input type="text" name="" id="addDoctorInfoDept" value="" placeholder="点击选择机构" disabled="disabled" /><input type="text" id="addDoctorInfoDeptHiddenId"style="display: none;"/>
						</li>
						<li><span class="infoDetails-title">用户姓名：&nbsp;</span><input type="text" name="" id="addDoctorInfoDocName" value="" /></li>
						<li><span class="infoDetails-title">联系电话：&nbsp;</span><input type="text" name="" id="addDoctorInfoDocTel" value="" /></li>
						<li><span class="infoDetails-title">用户账号：&nbsp;</span><input type="text" name="" id="addDoctorInfoDocUserCode" value="" /></li>
						<li><span class="infoDetails-title">邀请门店：</span><select name="" id="inviteStoreResAdd"></select></li>
						<li class="liBig">
							<span class="infoDetails-title lf"style="display: inline-block;height:100px;">用户描述：&nbsp;</span>
							<textarea class="addDoctorInfoDetail lf"id="addDoctorInfoDetail"style="height:100px;width:90%;"maxlength="500" placeholder="最多不超过500字"></textarea>
						</li>
					</ul>
					<!--机构弹出层-->
					<div id="addDoctorInfoDeptLay">
						<ul class="addDoctorInfoDept1 lf">
							<!--<li class="activeChoseDept">
                				机构1
                			</li>-->
						</ul>
						<!--<ul class="addDoctorInfoDept2 lf">
                			<li>
                				机构11
                			</li>
                		</ul>-->
					</div>

				</div>
				<button id="add-ok">确定新增</button>

				<a id="close4" href="javascript:void(0)" onclick="document.getElementById('doctorlight4').style.display='none';document.getElementById('fade').style.display='none'">取消</a>
			</div>

			<!--点击按钮修改-->

			<div id="doctorlight5" class="white_content">
				<div class="white_contentHead">
					<span class="infoTitle">用户信息修改</span>
					<a id="close"class="close" href="javascript:void(0)" onclick="document.getElementById('changeDoctorInfoDeptLay').style.display='none';document.getElementById('doctorlight5').style.display='none';document.getElementById('fade').style.display='none'">&times;</a>
				</div>
				<div class="infoDetails">
					<div class="infoDetailsHead">用户信息修改</div>
					<ul class="infoDetails-ul">
						<!--<li class="changeDoctorSelectUserIdentity">
							<span class="infoDetails-title">用户身份：
                			<select name="" style="width: 70%;height: 30px;"id="changeDoctorInfoUserInfo">
                				<option value="1"selected="selected">医生</option>
                				<option value="2">服务人员</option>
                				<option value="3">患者</option>
                				<option value="4">村医</option>
                			</select>
                		</li>
                		<li class="changeDoctorInfohospitalName"><span class="infoDetails-title">医院名称：
                			<select name="" style="width: 70%;height: 30px;"id="changeDoctorInfoHspName">
                				
                			</select>
                		</li>
                		<li class="changeDoctorInfoTechOffice"><span class="infoDetails-title">科&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;室：
                			<select name="" style="width: 70%;height: 30px;"id="changeDoctorInfoTechOffice">
                				
                			</select>
                		</li>-->
                		<li class="changeDoctorInfoChoseDept">
                			<span class="infoDetails-title">部&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;门：</span><input type="text" name="" id="changeDoctorInfoDept" value="" placeholder="点击选择机构" disabled="disabled" /><input type="text" id="changeDoctorInfoDeptHiddenId" style="display: none;" />
						</li>
						<li><span class="infoDetails-title">用户姓名：</span><input type="text" name="" id="changeDoctorInfoDocName" value="" /></li>
						<li><span class="infoDetails-title">联系电话：&nbsp;</span><input type="text" name="" id="changeDoctorInfoDocTel" value="" /></li>
						<li><span class="infoDetails-title">用户账号：&nbsp;</span><input type="text" name="" id="changeDoctorInfoDocUserCode" value="" /></li>
						<li><span class="infoDetails-title">邀请门店：</span><select name="" id="inviteStoreResChange"></select></li>
						<li class="liBig"><span class="infoDetails-title lf">用户描述：&nbsp;</span><textarea type="text" name="" id="changeDoctorInfoDetail" value="" maxlength="500" placeholder="最多不超过500字"/></textarea></li>
					</ul>
					<!--机构弹出层-->
					<div id="changeDoctorInfoDeptLay">
						<ul class="addDoctorInfoDept1 lf">
							<!--<li class="activeChoseDept">
                				机构1
                			</li>-->
						</ul>
						<!--<ul class="addDoctorInfoDept2 lf">
                			<li>
                				机构11
                			</li>
                		</ul>-->
					</div>
					<div class="changeHiddenListId"style="display: none;"></div>
				</div>
				<button id="change-ok">确定修改</button>

				<!--<button id="change-cancle">确定修改</button>-->

				<a id="change-cancle" href="javascript:void(0)" onclick="document.getElementById('doctorlight5').style.display='none';document.getElementById('fade').style.display='none'">取消修改</a>
			</div>

			<!--灰背景-->
			<div id="fade" class="black_overlay"></div>

		</div>

	</body>
	<!--<script src="../../js/jQuery-jcDate.js" type="text/javascript" charset="utf-8"></script>-->

	<script src="../../js/jquery-3.0.0.min.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript" src="../../js/sweetalert.min.js"></script>
	<script src="../../js/common.js" type="text/javascript" charset="utf-8"></script>
	<script src="../../js/config.js" type="text/javascript" charset="utf-8"></script>

	<script type="text/javascript">
		//			点击搜索按钮
		$(document).on("click", ".searching", function() {
			var search = $("#searchBox").val().trim();
		});

		//		点击查询按钮
		$(document).on("click", ".btn-check", function() {
			var lookDoctorInfoUserTypeId=$(this).parent().parent().find('.doctorInfoType').text();
			var lookDoctorInfoUserType;
			var lookdoctorInfofkHospitalName=$(this).parent().parent().find(".doctorInfofkHospitalName").text();//医院名称
			var lookdoctorInfofkSectionName=$(this).parent().parent().find(".doctorInfofkSectionName").text();//科室名称
			var lookdoctorInfofkDeptName=$(this).parent().parent().find(".doctorInfoDetail-name").text();//机构名称
			var lookdoctorInfofkHospitalId=$(this).parent().parent().find(".doctorInfofkHospitalId").text();//医院id
			var lookdoctorInfofkSectionId=$(this).parent().parent().find(".doctorInfofkSectionId").text();//科室id
			var lookdoctorInfofkDeptId=$(this).parent().parent().find(".doctorInfofkDeptId").text();//机构id
			var lookdoctorInfoUserName=$(this).parent().parent().find(".doctorInfoDetail-id span").text();//用户名
			var lookdoctorInfoTels=$(this).parent().parent().find(".currentMobile span").text();//用户电话
			var inviteStoreRes = $(this).parent().parent().find(".inviteStore span").text();//邀请门店
			var lookdoctorInfoDetails=$(this).parent().parent().find(".doctorDescript span").text();//医生描述
			var lookDoctorInfoUserCode=$(this).parent().parent().find(".currentUserCode span").text();//账号
			if(lookDoctorInfoUserTypeId=="1"){
				lookDoctorInfoUserType="医生" //用户类型
				$(".lookHosInfos").css("display","block");
				$(".lookOfficeInfos").css("display","block");
				$(".lookDeptInfos").css("display","none");
				
			}else if(lookDoctorInfoUserTypeId=="2"){
				lookDoctorInfoUserType="服务人员" //用户类型
				$(".lookHosInfos").css("display","none");
				$(".lookOfficeInfos").css("display","none");
				$(".lookDeptInfos").css("display","block");
			}
//			else if(lookDoctorInfoUserTypeId=="3"){
//				lookDoctorInfoUserType="患者" //用户类型
//				$(".lookHosInfos").css("display","none");
//				$(".lookOfficeInfos").css("display","none");
//				$(".lookDeptInfos").css("display","block");
//				$("#changeDoctorInfoDocTel").attr("disabled","disabled");
//			}
			else if(lookDoctorInfoUserTypeId=="4"){
				lookDoctorInfoUserType="村医" //用户类型
				$(".lookHosInfos").css("display","none");
				$(".lookOfficeInfos").css("display","none");
				$(".lookDeptInfos").css("display","block");
			}
			$("#lookDoctorInfoUserType").val(lookDoctorInfoUserType);
			$("#lookDoctorInfoHospName").val(lookdoctorInfofkHospitalName);//医院
			$("#lookDoctorInfoTechOffice").val(lookdoctorInfofkSectionName);//科室
			$("#lookDoctorInfoDept").val(lookdoctorInfofkDeptName);//机构
			$("#lookDoctorInfoUserName").val(lookdoctorInfoUserName);//用户名
			$("#lookDoctorInfoTel").val(lookdoctorInfoTels);//电话
			$("#inviteStoreRes").val(inviteStoreRes);//邀请门店
			$("#lookDoctorInfoUserCode").val(lookDoctorInfoUserCode);//账号
			$("#lookDoctorInfoDetail").val(lookdoctorInfoDetails);//描述
			$("#doctorlight1").fadeIn();
			$("#fade").fadeIn();
			$("#doctorlight1 input").attr("disabled",true);
			$("#doctorlight1 textarea").attr("disabled",true);
		});

		//门店下拉
		getSelect();
		function getSelect() {
			var sessionId = sessionStorage.getItem("sessionId");
			$.ajax({
				method: 'get',
				url: config + '/sys/dict/list',
				contentType: "application/json; charset=utf-8", //传到后台的数据格式
				async: true,
				data: {},
				dataType: 'jsonp', //接收值的格式
				jsonp: 'jsoncallback',
				success: function(res){
					console.log(res);
					if (res.status == "1") {
						var list = res.resultMap.dictList;
						$("#inviteStore").html('');
						var optionDom = '';
						if (list == null || list.length == 0) {
							list = [];
						} else {
							list.map( item => {
								if (item.name == null || item.name == undefined) return;
								else optionDom += `<option value='${item.name}'>${item.name}</option>`;
							});
							$("#inviteStore").append(optionDom);
						}
					}else{
						alert(res.message);
					}
				},
				error: function(res){
					console.log(res);
				}
			});
		}
		//		点击删除按钮
		$(document).on("click", ".btn-del", function() {
			$(".delHiddenListId").text($(this).parent().parent().find(".doctorInfoListId").text());
			$("#doctorlight2").fadeIn();
			$("#fade").fadeIn();
		});
		//		点击新增按钮
		var selectHosId; //定义新增默认选择的医院的id;
		var deptPid = 0; //定义新增默认选择的机构第一层pid为0
		var deptChoseName;//新增里的默认选择的机构名称
		$(".doctorBtnAdd").click(function() {
			$("#doctorlight4").fadeIn();
			$("#fade").fadeIn();
			var doctorDivIds = $("#addDoctorInfoHspName").attr("id"); //获取当前添加医生信息里医院选项的select的id
			//			读取医院信息
//			readHospital(doctorDivIds);
			//			读取机构信息
			var doctorSelectDeptIds = $("#addDoctorInfoDeptLay").attr("id");
			readDept(doctorSelectDeptIds, deptPid);
			$("#addDoctorInfoDocName").val(" ");
			$("#addDoctorInfoDocTel").val(" ");
			$.ajax({
				method: 'get',
				url: config + '/sys/dict/list',
				contentType: "application/json; charset=utf-8", //传到后台的数据格式
				async: true,
				data: {},
				dataType: 'jsonp', //接收值的格式
				jsonp: 'jsoncallback',
				success: function(res){
					console.log(res);
					if (res.status == "1") {
						var list = res.resultMap.dictList;
						$("#inviteStoreResAdd").html('');
						var optionDom = '';
						if (list == null || list.length == 0) {
							list = [];
						} else {
							list.map( item => {
								if (item.name == null || item.name == undefined) return;
								else optionDom += `<option value='${item.name}'>${item.name}</option>`;
							});
							$("#inviteStoreResAdd").append(optionDom);
						}
					}else{
						alert(res.message);
					}
				},
				error: function(res){
					console.log(res);
				}
			});
		});

		//点击修改按钮
		var changeInfoSelectHosId; //定义新增默认选择的医院的id;
		var changeInfodeptPid = 0; //定义新增默认选择的机构第一层pid为0
		var changeInfodeptChoseName;//新增里的默认选择的机构名称
		var changeInfoCurrentId;
$(document).on("click", ".btn-change", function() {
			var changeDoctorInfoUserTypeId=$(this).parent().parent().find('.doctorInfoType').text();
			var changeDoctorInfoUserType;
			var changedoctorInfofkHospitalName=$(this).parent().parent().find(".doctorInfofkHospitalName").text();//医院名称
			var changedoctorInfofkSectionName=$(this).parent().parent().find(".doctorInfofkSectionName").text();//科室名称
			var changedoctorInfofkDeptName=$(this).parent().parent().find(".doctorInfoDetail-name").text();//机构名称
			var changedoctorInfofkHospitalId=$(this).parent().parent().find(".doctorInfofkHospitalId").text();//医院id
			var changedoctorInfofkSectionId=$(this).parent().parent().find(".doctorInfofkSectionId").text();//科室id
			var changedoctorInfofkDeptId=$(this).parent().parent().find(".doctorInfofkDeptId").text();//机构id
			var changedoctorInfoUserName=$(this).parent().parent().find(".doctorInfoDetail-id span").text();//用户名
			var changedoctorInfoTels=$(this).parent().parent().find(".currentMobile span").text();//用户电话
			var changedoctorInfoDetails=$(this).parent().parent().find(".doctorDescript span").text();//医生描述
			var changedoctorInfoUserCode=$(this).parent().parent().find(".currentUserCode span").text();//账号
			var inviteStoreRes = $(this).parent().parent().find(".inviteStore span").text();//邀请门店
			$(".changeHiddenListId").text($(this).parent().parent().find(".doctorInfoListId").text());
			if(changeDoctorInfoUserTypeId=="1"){
				changeDoctorInfoUserType="医生" //用户类型
				$(".changeDoctorInfohospitalName").css("display","block");
				$(".changeDoctorInfoTechOffice").css("display","block");
				$(".changeDoctorInfoChoseDept").css("display","none");
			}else if(changeDoctorInfoUserTypeId=="2"){
				changeDoctorInfoUserType="服务人员" //用户类型
				$(".changeDoctorInfohospitalName").css("display","none");
				$(".changeDoctorInfoTechOffice").css("display","none");
				$(".changeDoctorInfoChoseDept").css("display","block");
			}
			else if(changeDoctorInfoUserTypeId=="3"){
//				changeDoctorInfoUserType="患者" //用户类型
//				$(".changeDoctorInfohospitalName").css("display","none");
//				$(".changeDoctorInfoTechOffice").css("display","none");
//				$(".changeDoctorInfoChoseDept").css("display","block");
//				$("#changeDoctorInfoDocTel").attr("disabled","disabled");				
			}
			else if(changeDoctorInfoUserTypeId=="4"){
				changeDoctorInfoUserType="村医" //用户类型
				$(".changeDoctorInfohospitalName").css("display","none");
				$(".changeDoctorInfoTechOffice").css("display","none");
				$(".changeDoctorInfoChoseDept").css("display","block");
			}
//			$("#inviteStoreResChange").val(inviteStoreRes);//邀请门店
			$.ajax({
				method: 'get',
				url: config + '/sys/dict/list',
				contentType: "application/json; charset=utf-8", //传到后台的数据格式
				async: true,
				data: {},
				dataType: 'jsonp', //接收值的格式
				jsonp: 'jsoncallback',
				success: function(res){
					console.log(res);
					if (res.status == "1") {
						var list = res.resultMap.dictList;
						$("#inviteStoreResChange").html('');
						var optionDom = '';
						if (list == null || list.length == 0) {
							list = [];
						} else {
							list.map( item => {
								if (item.name == null || item.name == undefined) return;
								else if(item.name == inviteStoreRes) optionDom += `<option selected=selected value='${item.name}'>${item.name}</option>`;
								else optionDom += `<option value='${item.name}'>${item.name}</option>`;
							});
							$("#inviteStoreResChange").append(optionDom);
						}
					}else{
						alert(res.message);
					}
				},
				error: function(res){
					console.log(res);
				}
			});
//			初始化医院信息
			var changedoctorDivIds = $("#changeDoctorInfoHspName").attr("id"); //获取当前修改弹框医生信息里医院选项的select的id
//			读取医院信息
			if(changedoctorInfofkHospitalId==""||changedoctorInfofkHospitalId=="null"||changedoctorInfofkHospitalId=="undefined"){
				changedoctorInfofkHospitalId=1;
			}
			changeInfoSelectHosId = changedoctorInfofkHospitalId;
			changeInfoCurrentId=changedoctorInfofkSectionId;
			//readHospital(changedoctorDivIds,changeInfoSelectHosId,changeInfoCurrentId);
			$("#changeDoctorInfoHspName").val(changedoctorInfofkHospitalId);
			
			if(changeInfoSelectHosId!=""&&changeInfoSelectHosId!=null&&changeInfoSelectHosId!=undefined){
				//			初始化科室信息
				var changecurrentTechOfficeSlcId = $("#changeDoctorInfoTechOffice").attr("id");
				//techOffice(changeInfoSelectHosId,changecurrentTechOfficeSlcId,changeInfoCurrentId);
			}

//			初始化机构信息
//			读取机构信息
			if(changedoctorInfofkDeptId!=""&&changedoctorInfofkDeptId!=null){
				changeInfodeptPid=parseInt(changedoctorInfofkDeptId);
			}else{
				changeInfodeptPid=0;
			}
			var changedoctorSelectDeptIds = $("#changeDoctorInfoDeptLay").attr("id");//修改弹框里的机构弹框
			readDept(changedoctorSelectDeptIds,0);
			$("#changeDoctorInfoUserInfo").val(changeDoctorInfoUserTypeId);
			$("#changeDoctorInfoHspName").val(changedoctorInfofkHospitalName);//医院
			$("#changeDoctorInfoTechOffice").val(changedoctorInfofkSectionName);//科室
			$("#changeDoctorInfoDept").val(changedoctorInfofkDeptName);//机构
			$("#changeDoctorInfoDeptHiddenId").val(changedoctorInfofkDeptId);//机构id
			$("#changeDoctorInfoDocName").val(changedoctorInfoUserName);//用户名
			$("#changeDoctorInfoDocTel").val(changedoctorInfoTels);//电话
			
			$("#changeDoctorInfoDetail").val(changedoctorInfoDetails);//描述
			$("#changeDoctorInfoDocUserCode").val(changedoctorInfoUserCode);//用户
			$("#doctorlight5").fadeIn();
			$("#fade").fadeIn();
//			console.log(changedoctorInfoDetails);
			
		})
		// 	新增内容里医院和机构联动
		$(".doctorSelectUserIdentity select").change(function() {
			if($(this).val() == "1") {
				$(".AddDoctorInfohospitalName").css("display", "block");
				$(".AddDoctorInfoTechOffice").css("display", "block");
				$(".AddDoctorInfoChoseDept").css("display", "none");
			} else {
				$(".AddDoctorInfohospitalName").css("display", "none");
				$(".AddDoctorInfoTechOffice").css("display", "none");
				$(".AddDoctorInfoChoseDept").css("display", "block");
			}
		});
		//修改信息弹框里的医院和机构联动
		$(".changeDoctorSelectUserIdentity select").change(function() {
			if($(this).val() == "1") {
				$(".changeDoctorInfohospitalName").css("display", "block");
				$(".changeDoctorInfoTechOffice").css("display", "block");
				$(".changeDoctorInfoChoseDept").css("display", "none");
			} else {
				$(".changeDoctorInfohospitalName").css("display", "none");
				$(".changeDoctorInfoTechOffice").css("display", "none");
				$(".changeDoctorInfoChoseDept").css("display", "block");
			}
		});
		//点击新增里的医院选择框	
		$("#addDoctorInfoHspName").change(function() {
			//	console.log($(this).val());
			var currentTechOfficeSlcId = $("#addDoctorInfoTechOffice").attr("id");
			selectHosId = $(this).val();
			techOffice(selectHosId, currentTechOfficeSlcId);
		});
		//点击修改框里的医院选择框
		$("#changeDoctorInfoHspName").change(function() {
			//	console.log($(this).val());
			var changecurrentTechOfficeSlcId = $("#changeDoctorInfoTechOffice").attr("id");
			changeInfoSelectHosId = $(this).val();
			techOffice(changeInfoSelectHosId, changecurrentTechOfficeSlcId);
		});
		//点击增加的机构弹框里的内容时
		var kIndex = 1; //初始化有几个ul
		$("#doctorlight4").on("click", "#addDoctorInfoDeptLay li", function() {
			//	console.log($(this).val());
			var addDoctorInfoDeptLayId = $("#addDoctorInfoDeptLay").attr("id");
			deptPid = parseInt($(this).find(".currentDeptId").text());
			deptChoseName = $(this).find(".currentDeptName").text();
			$("#addDoctorInfoDeptHiddenId").val(deptPid);
			$("#addDoctorInfoDept").val(deptChoseName);
			//	获取当前点击的是第几层
			var index = $("#addDoctorInfoDeptLay ul").index($(this).parent()); //判断是第几个ul
			kIndex = index + 2;
			if($(this).parent().next().length == 0) { //如果当前点击的ul后面没有ul添加一个，如果有就不添加
				//		k++;
				sessionStorage.setItem("currentUlNum", kIndex); //当前有几个ul了，重新加载页面的时候记住并添加
				$(this).parent().after('<ul class="addDoctorInfoDept' + kIndex + ' lf"></ul>');
			}
			readDept(addDoctorInfoDeptLayId, deptPid, index);
		});
		//点击修改弹框里的机构弹框里的内容时
		var changekIndex = 1; //初始化有几个ul
		$("#doctorlight5").on("click", "#changeDoctorInfoDeptLay li", function() {
			//	console.log($(this).val());
			var changeDoctorInfoDeptLay = $("#changeDoctorInfoDeptLay").attr("id");
			changeInfodeptPid = parseInt($(this).find(".currentDeptId").text());
			cahngeDeptChoseName = $(this).find(".currentDeptName").text();
			$("#changeDoctorInfoDeptHiddenId").val(changeInfodeptPid);
			$("#changeDoctorInfoDept").val(cahngeDeptChoseName);
			//	获取当前点击的是第几层
			var index = $("#changeDoctorInfoDeptLay ul").index($(this).parent()); //判断是第几个ul
			changekIndex = index + 2;
			if($(this).parent().next().length == 0) { //如果当前点击的ul后面没有ul添加一个，如果有就不添加
				//		k++;
				sessionStorage.setItem("currentUlNum", changekIndex); //当前有几个ul了，重新加载页面的时候记住并添加
				$(this).parent().after('<ul class="addDoctorInfoDept' + changekIndex + ' lf"></ul>');
			}
			readDept(changeDoctorInfoDeptLay, changeInfodeptPid, index);
		});
		//新增里的点击除按钮和弹框以外的地方弹框消失
		//点击新增里的选择机构
//		$(function(){
//		　　$(document).bind("click",function(e){
//				$(".AddDoctorInfoChoseDept").click(function(e) {
//					e.stopPropagation();
//					$("#addDoctorInfoDeptLay").toggle();
//				});
//		　　　　//id为menu的是菜单 
//		　　　　if($(e.target).closest("#addDoctorInfoDeptLay").length == 0 && $(e.target).closest("#addDoctorInfoDeptLay li").length == 0){
//		　　　　//点击id为menu之外且id，则触发
//		　　　	$("#changeDoctorInfoDeptLay").css("display", "none");
//		　　　　}
//		　　})
//		})
		$("body").click(function (e) {
		    if (!$(e.target).closest(".AddDoctorInfoChoseDept,#addDoctorInfoDeptLay").length) {
		        $("#addDoctorInfoDeptLay").hide();
		    }
		});
		$(".AddDoctorInfoChoseDept").click(function(e) {
				$("#addDoctorInfoDeptLay").toggle();
		});
		//点击修改里的选择机构
		$("body").click(function (e) {
		    if (!$(e.target).closest(".changeDoctorInfoChoseDept,#changeDoctorInfoDeptLay").length) {
		        $("#changeDoctorInfoDeptLay").hide();
		    }
		});
		$(document).ready(function() {
			$(".changeDoctorInfoChoseDept").click(function(e) {
				$("#changeDoctorInfoDeptLay").toggle();
			});
		});
		//		读取医院的接口
		function readHospital(currentSelectIds,currentName,currentTid) { //参数为外层的selcect的id
			console.log(currentSelectIds);
			$("#" + currentSelectIds).html('<option value="0"selected="selected">请选择</option>');
			
			$.ajax({
				type: "get",
				url: config + "/sys/hospital/list",
				async: false,
				dataType: "jsonp",
				jsonp: "jsoncallback",
				data: {},
				success: function(data) {
					console.log(data);
					if(data.status == 1) {
						var hospitalList = data.resultMap.hospitalList;
						for(var s = 0; s < hospitalList.length; s++) {
							var hospitalHtml = '';
							hospitalHtml += '<option value="' + hospitalList[s].id + '">' + hospitalList[s].name + '</option>';
							$("#" + currentSelectIds).append(hospitalHtml);
						}
					}
					selectHosId = $("#addDoctorInfoHspName").val(); //定义默认选择的医院的id;
					console.log(selectHosId);
					selectHosId=currentName;
					var currentTechOfficeSlcId = $("#" + currentSelectIds).parent().parent().next().find("select").attr("id");
					if(currentTid!=""&&currentTid!=null&&currentTid!=undefined){
						$("#" + currentSelectIds).val(selectHosId);
					}else{
						$("#" + currentSelectIds).val(0);
					}
					techOffice(selectHosId,currentTechOfficeSlcId,currentTid);
				},
			});
		}
		//读取科室
		function techOffice(currentSelectHosIds, currentTechSelect,currentTid) { //参数为当前选择上的医院的id和科室的select的id
			$("#" + currentTechSelect).html('<option value="0"selected="selected">请选择</option>');
			$.ajax({
				type: "get",
				url: config + "/sys/section/list",
				async: false,
				dataType: "jsonp",
				jsonp: "jsoncallback",
				data: {
					fkHospitalId: currentSelectHosIds
				},
				success: function(data) {
					console.log(data);
					if(data.status == 1) {
						var sectionList = data.resultMap.sectionList;
						for(var t = 0; t < sectionList.length; t++) {
							var techOfficeHtml = '';
							techOfficeHtml += '<option value="' + sectionList[t].id + '">' + sectionList[t].name + '</option>';
							$("#" + currentTechSelect).append(techOfficeHtml);
						}
						if(currentTid!=""&&currentTid!=null&&currentTid!=undefined){
							$("#" + currentTechSelect).val(currentTid);
						}else{
							$("#" + currentTechSelect).val(0);
						}
					}
				},
			});
		}

		//读取机构
		function readDept(currentSelectDeptIds, deptPid, index) { //参数为当前选择上的医院的id和科室的select的id
			if(deptPid == 0) {
				$("#" + currentSelectDeptIds).find(".addDoctorInfoDept1").html('');
			} else {
				var currentIndex = index + 2;
				console.log(currentIndex, "currentIndex");
				$("#" + currentSelectDeptIds).find(".addDoctorInfoDept" + currentIndex).html(''); //添加之前先清空
				$("#" + currentSelectDeptIds).find(".addDoctorInfoDept" + currentIndex).nextAll().remove();
			}
			$.ajax({
				type: "get",
				url: config + "/sys/dept/list",
				async: false,
				dataType: "jsonp",
				jsonp: "jsoncallback",
				data: {
					pid: deptPid
				},
				success: function(data) {
					console.log(data);
					if(data.status == 1) {
						var deptList = data.resultMap.deptList;
						if(deptPid == 0) {
							console.log(currentSelectDeptIds);
							for(var a = 0; a < deptList.length; a++) {
								var deptListHtml = '';
								deptListHtml += '<li><span class="currentDeptName">' + deptList[a].name + '</span><span class="currentDeptId"style="display:none;">' + deptList[a].id + '</span></li>';
								$("#" + currentSelectDeptIds).find(".addDoctorInfoDept1").append(deptListHtml);
							}
						} else {
							for(var a = 0; a < deptList.length; a++) {
								var deptListHtml = '';
								deptListHtml += '<li><span class="currentDeptName">' + deptList[a].name + '</span><span class="currentDeptId"style="display:none;">' + deptList[a].id + '</span></li>';
								$("#" + currentSelectDeptIds).find(".addDoctorInfoDept" + currentIndex).append(deptListHtml);
							}
						}

					}
				},
			});
		}
		//      以下是调取接口
		//		加载列表
		var userId = sessionStorage.getItem('userId');
		//		分页
		var currentPage = 1;
		var offsetPage = 0; //传输的页起始条数
		var showNum = 10; //页面需要显示的条数
		var doctoNum_pages;
		//点击分页页数
		$(document).delegate(".flipOver", 'click', function() {
			$(this).addClass('active').siblings().removeClass('active');
			currentPage = parseInt($(this).attr("pageId"));
			offsetPage = (currentPage - 1) * 10; //（页码-1）*每页显示条数
			doctorList();
			window.scrollTo(0, 0);
		});
		//点击上一页
		$(document).delegate("#prev", 'click', function() {
			if($(".flipOver.active").prev().attr("id") == "prev") {
				return true
			} else {
				var page = parseInt($(".flipOver.active").attr("pageid")) - 1;
				$(".flipOver.active").prev().addClass("active").siblings().removeClass("active")
			}
			currentPage = page;
			offsetPage = (currentPage - 1) * 10; //（页码-1）*每页显示条数
			doctorList();
			window.scrollTo(0, 0);
		});

		//点击下一页
		$(document).delegate("#Next", 'click', function() {
			if($(".flipOver.active").next().attr("id") == "Next") {
				return true
			} else {
				var page = parseInt($(".flipOver.active").attr("pageid")) + 1;
				$(".flipOver.active").next().addClass("active").siblings().removeClass("active")
			}
			currentPage = page;
			offsetPage = (currentPage - 1) * 10; //（页码-1）*每页显示条数
			doctorList();
			window.scrollTo(0, 0);
		});
			//点击分页跳转页按钮
	    $(document).delegate(".srueToJumpPageBtn",'click',function(){
	        currentPage = parseInt($(".toPageNum").val().trim());
	        offsetPage = (currentPage-1)*10;//（页码-1）*每页显示条数
	        doctorList();
	        window.scrollTo(0,0);
	    });
		//			读取用户列表
		var searchHospitalId="";  
		var searchSectionId="";  
		var searchUserName="";
		var inviteStore = "";
		doctorList();
		//	获取订单列表
		function doctorList() {
			$("#doctorContentList").html('');
			$.ajax({
				type: "get",
				url: config + "/sys/user/list",
				async: false,
				dataType: "jsonp",
				jsonp: "jsoncallback",
				data: {
					//所属科室id
					fkSectionId:searchSectionId,
					//所属医院id
					fkHospitalId:searchHospitalId,
					//员工姓名
					userNameLike:searchUserName,
					// 邀请门店
					inviteStore: inviteStore,
					offset: offsetPage, //（页码-1）*每页显示条数
					limit: showNum //每页赢显示的条数	
				},
				success: function(data) {
					console.log("此处为医生管理列表信息");
					console.log(data);
					var doctorinfoList = data.resultMap.userList;
					var doclistTotal = data.resultMap.total; //总条数
					//							var index = data.viewIndex;
//					alert(doclistTotal);
					doctoNum_pages = Math.ceil(parseInt(doclistTotal) / 10); //总条数除以每页十条数据为总页码
//					alert(doctoNum_pages);
					for(var i = 0, k = 0; i < doctorinfoList.length; i++) {
						console.log(doctorinfoList[i].name);
						var doctorhtml = '';
						k++;
						doctorhtml += '<ul class="doctorInfoDetail-ul">';
						doctorhtml += '<li class="doctorInfoListId"style="display:none">' + doctorinfoList[i].id + '</li>' ;//隐藏的用户身份
						doctorhtml += '<li class="doctorInfoType"style="display:none">' + doctorinfoList[i].type + '</li>' ;//隐藏的用户身份
						doctorhtml += '<li class="doctorInfofkHospitalId"style="display:none">' + doctorinfoList[i].fkHospitalId + '</li>';//隐藏的医院id
						doctorhtml += '<li class="doctorInfofkHospitalName"style="display:none">' + doctorinfoList[i].hospitalName + '</li>';//隐藏的医院名称
						doctorhtml += '<li class="doctorInfofkSectionId"style="display:none">' + doctorinfoList[i].fkSectionId + '</li>'; //隐藏的科室id
						doctorhtml += '<li class="doctorInfofkSectionName"style="display:none">' + doctorinfoList[i].sectionName + '</li>';//隐藏的科室名称
						doctorhtml += '<li class="doctorInfofkDeptId"style="display:none">' + doctorinfoList[i].fkDeptId + '</li>';//隐藏的机构id
//						doctorhtml += '<li class="doctorInfoDetail-radio"><label class="radio"><input type="radio" name="radio" id="" value="" class="radioclass"/><i></i></label></li>';
						doctorhtml += '<li class="doctorInfoDetail-code LiTextAlign"><span>' + k + '</span></li>';
						if(doctorinfoList[i].type == 1) {
							if(doctorinfoList[i].hospitalName == "" || doctorinfoList[i].hospitalName == null) {
								if(doctorinfoList[i].sectionName == "" || doctorinfoList[i].sectionName == null) {
									doctorhtml += '<li class="doctorInfoDetail-name LiTextAlign"><span></span></li>'; //组织机构为医院和科室组织的
								} else {
									doctorhtml += '<li class="doctorInfoDetail-name LiTextAlign"><span>' + doctorinfoList[i].sectionName + '</span></li>'; //组织机构为医院和科室组织的
								}
							} else {
								if(doctorinfoList[i].sectionName == "" || doctorinfoList[i].sectionName == null) {
									doctorhtml += '<li class="doctorInfoDetail-name LiTextAlign"><span>' + doctorinfoList[i].hospitalName + '</span></li>'; //组织机构为医院和科室组织的
								} else {
									doctorhtml += '<li class="doctorInfoDetail-name LiTextAlign"><span>' + doctorinfoList[i].hospitalName + '（' + doctorinfoList[i].sectionName + '）' + '</span></li>'; //组织机构为医院和科室组织的
								}
							}
						} else {
							if(doctorinfoList[i].deptName == "" || doctorinfoList[i].deptName == null) {
								doctorhtml += '<li class="doctorInfoDetail-name LiTextAlign"><span></span></li>'; //机构
							} else {
								doctorhtml += '<li class="doctorInfoDetail-name LiTextAlign"><span>' + doctorinfoList[i].deptName + '</span></li>'; //机构
							}
						}

						//								doctorhtml+='<li class="doctorInfoDetail-sex"><span>'+doctorinfoList[i].fkDeptId+'</span></li>';//科室
						doctorhtml += '<li class="doctorInfoDetail-id LiTextAlign"><span>' + doctorinfoList[i].userName + '</span></li>'; //医生姓名
						if(doctorinfoList[i].userCode){
							doctorhtml += '<li class="doctorInfoDetail-tel LiTextAlign currentUserCode"><span>' + doctorinfoList[i].userCode + '</span></li>'; //用户账号
						}
						if(doctorinfoList[i].mobile != "" && doctorinfoList[i].mobile != null) {
							doctorhtml += '<li class="doctorInfoDetail-tel LiTextAlign currentMobile"><span>' + doctorinfoList[i].mobile + '</span></li>'; //医生电话
						} else {
							doctorhtml += '<li class="doctorInfoDetail-tel LiTextAlign currentMobile"><span></span></li>'; //医生电话
						}
						if(doctorinfoList[i].inviteStore != "" && doctorinfoList[i].inviteStore != null) {
							doctorhtml += '<li class="doctorInfoDetail-tel LiTextAlign inviteStore"><span>'+doctorinfoList[i].inviteStore+'</span></li>'; //邀请门店
						} else {
							doctorhtml += '<li class="doctorInfoDetail-tel LiTextAlign inviteStore"><span></span></li>'; //邀请门店
						}

						if(doctorinfoList[i].memo != "" && doctorinfoList[i].memo != null) {
							doctorhtml += '<li class="doctorDescript LiTextAlign"><span>' + doctorinfoList[i].memo + '</span></li>'; //医生描述
						} else {
							doctorhtml += '<li class="doctorDescript LiTextAlign"><span></span></li>'; //医生描述
						}
						doctorhtml += '<li class="doctorInfoDetail-check LiTextAlign"><a href = "javascript:void(0)" class="btn-check btnTextColor"><span>查看</span></a></li>';
						if(doctorinfoList[i].type != 3) {
//							doctorhtml += '<li class="doctorInfoDetail-change LiTextAlign"><a href = "javascript:void(0)" class="btn-change btnTextColor"><span>修改</span></a></li>';
							doctorhtml += '<li class="doctorInfoDetail-change LiTextAlign"><a href = "javascript:void(0)" class="btn-change btnTextColor"><span>修改</span></a></li>';
							doctorhtml += '<li class="doctorInfoDetail-del LiTextAlign"><a href = "javascript:void(0)" class="btn-del btnTextColor"><span>删除</span></a></li>';
						}					
						doctorhtml += '</ul>';
						$("#doctorContentList").append(doctorhtml);
						var pageHtml = page(parseInt(currentPage), doctoNum_pages);
						$(".doctorpageN").html(pageHtml);
					}
					if(data.status == 1) {}
				},
			});
		}
		//		点击确认新增
		$("#doctorlight4 #add-ok").click(function() {
			var userIdentity = $("#addDoctorInfoUserInfo").val() //用户身份
			userIdentity="";
			var addDoctorInfoHspName = $("#addDoctorInfoHspName").val(); //医院名
			var addDoctorInfoTechOffice = $("#addDoctorInfoTechOffice").val(); //科室
			var addDoctorInfoDocName = $("#addDoctorInfoDocName").val().trim(); //医生姓名
			var addDoctorInfoDocTel = $("#addDoctorInfoDocTel").val().trim(); //医生电话
			var addDoctorInfoDetail = $("#addDoctorInfoDetail").val(); //医生描述
			var addDoctorInfoChoseDept = $("#addDoctorInfoDept").val(); //获取所选机构
			var addDoctorInfoChoseDeptId = $("#addDoctorInfoDeptHiddenId").val(); //获取选择机构id
			var userCode=$("#addDoctorInfoDocUserCode").val().trim();//账号
			var inviteStore = $("#inviteStoreResAdd").val().trim();//邀请门店
			var AddDoctorInfo = {}; //定义一个对象存放参数
			console.log($("#addDoctorInfoDetail"));
			if(userIdentity==1){//医生
				if(addDoctorInfoHspName==0){
				alert("请选择医院");
				}else if(addDoctorInfoTechOffice==0){
					alert("请选择科室");
				}else if(addDoctorInfoDocName==""||addDoctorInfoDocName==null){
					alert("请输入用户名");
				}else if(addDoctorInfoDocTel==""||addDoctorInfoDocTel==null){
					alert("请输入联系方式");
				}else if(!(/^1[3456789]\d{9}$/.test(addDoctorInfoDocTel))){
					alert("请输入正确的联系方式");
				}else if(userCode==""||userCode==null){
					alert("请输入用户账号");
				}else{
				if(userIdentity == "1") {
				AddDoctorInfo = {
					type: userIdentity,
					fkHospitalId: addDoctorInfoHspName,
					fkSectionId: addDoctorInfoTechOffice,
					userName: addDoctorInfoDocName,
					mobile: addDoctorInfoDocTel,
					memo: addDoctorInfoDetail,
					userCode:userCode,
					inviteStore: inviteStore
				}
			} else {
				AddDoctorInfo = {
					type: userIdentity,
					fkDeptId: addDoctorInfoChoseDeptId,
					userName: addDoctorInfoDocName,
					mobile: addDoctorInfoDocTel,
					memo: addDoctorInfoDetail,
					userCode:userCode,
					inviteStore: inviteStore
				}
			}
					$.ajax({
						method: 'get',
						url: config + '/sys/user/save',
						contentType: "application/json; charset=utf-8", //传到后台的数据格式
						async: true,
						data: AddDoctorInfo,
						dataType: 'jsonp', //接收值的格式
						jsonp: 'jsoncallback',
						success: function(data) {
							console.log(data);
							if(data.status == 1) {
								document.getElementById('doctorlight4').style.display = 'none';
								document.getElementById('fade').style.display = 'none';
								alert(data.message)
								doctorList();
							} else {
								alert(data.message);
								//		window.location.reload();
							}
						},
						error: function(result) {
							console.log(result);
						}
					});
				}
			}else{
				if(addDoctorInfoChoseDept==""||addDoctorInfoChoseDept==null){
					alert("请选择机构");
				}else if(addDoctorInfoDocName==""||addDoctorInfoDocName==null){
					alert("请输入用户名");
				}else if(addDoctorInfoDocTel==""||addDoctorInfoDocTel==null){
					alert("请输入联系方式");
				}else if(!(/^1[3456789]\d{9}$/.test(addDoctorInfoDocTel))){
					alert("请输入正确的联系方式");
				}else if(userCode==""||userCode==null){
					alert("请输入用户账号");
				}else{
					if(userIdentity == "1") {
					AddDoctorInfo = {
						type: userIdentity,
						fkHospitalId: addDoctorInfoHspName,
						fkSectionId: addDoctorInfoTechOffice,
						userName: addDoctorInfoDocName,
						mobile: addDoctorInfoDocTel,
						memo: addDoctorInfoDetail,
						userCode:userCode,
						inviteStore: inviteStore
					}
					} else {
						AddDoctorInfo = {
							type: userIdentity,
							fkDeptId: addDoctorInfoChoseDeptId,
							userName: addDoctorInfoDocName,
							mobile: addDoctorInfoDocTel,
							memo: addDoctorInfoDetail,
							userCode:userCode,
							inviteStore: inviteStore
						}
					}
					$.ajax({
						method: 'get',
						url: config + '/sys/user/save',
						contentType: "application/json; charset=utf-8", //传到后台的数据格式
						async: true,
						data: AddDoctorInfo,
						dataType: 'jsonp', //接收值的格式
						jsonp: 'jsoncallback',
						success: function(data) {
							console.log(data);
							if(data.status == 1) {
								document.getElementById('doctorlight4').style.display = 'none';
								document.getElementById('fade').style.display = 'none';
								alert(data.message)
								doctorList();
							} else {
								alert(data.message);
								//		window.location.reload();
							}
						},
						error: function(result) {
							console.log(result);
						}
					});
				}
			}
		})
		
		//		点击确认修改
		$("#doctorlight5 #change-ok").click(function() {
			var changeListIds=parseInt($(".changeHiddenListId").text()); //用户id
			var userIdentity = $("#changeDoctorInfoUserInfo").val(); //用户身份
			userIdentity='';
			var changeDoctorInfoHspName = $("#changeDoctorInfoHspName").val(); //医院名
			var changeDoctorInfoTechOffice = $("#changeDoctorInfoTechOffice").val(); //科室
			var changeDoctorInfoDocName = $("#changeDoctorInfoDocName").val().trim(); //医生姓名
			var changeDoctorInfoDocTel = $("#changeDoctorInfoDocTel").val().trim(); //医生电话
			var changeDoctorInfoDetail = $("#changeDoctorInfoDetail").val(); //医生描述
			var changeDoctorInfoChoseDept = $("#changeDoctorInfoDept").val(); //获取所选机构
			var changeDoctorInfoChoseDeptId = $("#changeDoctorInfoDeptHiddenId").val(); //获取选择机构id
			var inviteStore = $("#inviteStoreResChange").val().trim();//邀请门店
			var userCode=$("#changeDoctorInfoDocUserCode").val().trim(); //账号
			var changeDoctorInfo = {}; //定义一个对象存放参数
			console.log(changeDoctorInfoHspName);
			if(userIdentity == "1") {
				if(changeDoctorInfoHspName==0||changeDoctorInfoHspName==null||changeDoctorInfoHspName==""){
					alert("请选择医院");
				}else if(changeDoctorInfoTechOffice==0||changeDoctorInfoTechOffice==null||changeDoctorInfoTechOffice==""){
					alert("请选择科室");
				}else if(changeDoctorInfoDocName==""||changeDoctorInfoDocName==null){
					alert("请输入用户名");
				}else if(changeDoctorInfoDocTel==""||changeDoctorInfoDocTel==null){
					alert("请输入联系方式");
				}else if(!(/^1[3456789]\d{9}$/.test(changeDoctorInfoDocTel))){
					alert("请输入正确的联系方式");
				}else if(userCode==""||userCode==null){
					alert("请输入用户账号");
				}else{
					changeDoctorInfo = {
						id:changeListIds,
						type: userIdentity,
						fkHospitalId: changeDoctorInfoHspName,
						fkSectionId: changeDoctorInfoTechOffice,
						userName: changeDoctorInfoDocName,
						mobile: changeDoctorInfoDocTel,
						memo: changeDoctorInfoDetail,
						userCode:userCode,
						inviteStore: inviteStore
					}
					$.ajax({/*
						method: 'get',
						url: config + '/sys/user/update',
						contentType: "application/json; charset=utf-8", //传到后台的数据格式
						async: true,
						data: changeDoctorInfo,
						dataType: 'jsonp', //接收值的格式
						jsonp: 'jsoncallback',
						success: function(data) {
							console.log(data);
							if(data.status == 1) {
								document.getElementById('doctorlight5').style.display = 'none';
								document.getElementById('fade').style.display = 'none';
								alert(data.message)
								doctorList();
							} else {
								alert(data.message);
								//		window.location.reload();
							}
						},
						error: function(result) {
							console.log(result);
						}
					*/});
				}
				
			} else {
				console.log(changeDoctorInfoDeptHiddenId);
				if(changeDoctorInfoChoseDept==""||changeDoctorInfoChoseDept==null){
					alert("请选择机构");
				}else if(changeDoctorInfoDocName==""||changeDoctorInfoDocName==null){
					alert("请输入用户名");
				}else if(changeDoctorInfoDocTel==""||changeDoctorInfoDocTel==null){
					alert("请输入联系方式");
				}else if(!(/^1[3456789]\d{9}$/.test(changeDoctorInfoDocTel))){
					alert("请输入正确的联系方式");
				}else if(userCode==""||userCode==null){
					alert("请输入用户账号");
				}else{
					changeDoctorInfo = {
						id:changeListIds,
						type: userIdentity,
						fkDeptId: changeDoctorInfoChoseDeptId,
						userName: changeDoctorInfoDocName,
						mobile: changeDoctorInfoDocTel,
						memo: changeDoctorInfoDetail,
						userCode:userCode,
						inviteStore: inviteStore
					}
					$.ajax({
						method: 'get',
						url: config + '/sys/user/update',
						contentType: "application/json; charset=utf-8", //传到后台的数据格式
						async: true,
						data: changeDoctorInfo,
						dataType: 'jsonp', //接收值的格式
						jsonp: 'jsoncallback',
						success: function(data) {
							console.log(data);
							if(data.status == 1) {
								document.getElementById('doctorlight5').style.display = 'none';
								document.getElementById('fade').style.display = 'none';
								alert(data.message)
								doctorList();
							} else {
								alert(data.message);
								//		window.location.reload();
							}
						},
						error: function(result) {
							console.log(result);
						}
					});
				}
				
			}
			
			
		})
//		删除单行数据
		$("#doctorlight2 #del-yes").click(function(){
			var changeListIds=parseInt($(".delHiddenListId").text()); //用户id
			$.ajax({
				method: 'get',
				url: config + '/sys/user/remove',
				contentType: "application/json; charset=utf-8", //传到后台的数据格式
				async: true,
				data: {id:changeListIds},
				dataType: 'jsonp', //接收值的格式
				jsonp: 'jsoncallback',
				success: function(data) {
					console.log(data);
					if(data.status == 1) {
						document.getElementById('doctorlight2').style.display = 'none';
						document.getElementById('fade').style.display = 'none';
						alert(data.message)
						doctorList();
					} else {
						alert(data.message);
						//		window.location.reload();
					}
				},
				error: function(result) {
					console.log(result);
				}
			});
		});
//	加载页面时默认加载查询条件---医院 科室 医生
	
//	readHospital("doctorInfoSearchHos");
	//	点击医院的时候联动科室
	$("#doctorInfoSearchHos").change(function(){
		var currentDoctorInfoSearchHos=$(this).val();
		searchHospitalId=currentDoctorInfoSearchHos;
		doctorList();
		techOffice(currentDoctorInfoSearchHos,"doctorInfoSearchTechOffice");
	});
//	点击页面查询
	$("#doctorSearchBtns").click(function(){
		currentPage = 1;
		offsetPage = 0; //传输的页起始条数
		searchHospitalId=$("#doctorInfoSearchHos").val();
		searchSectionId=$("#doctorInfoSearchTechOffice").val();
		searchUserName=$("#doctorInfoSearchName").val();
		inviteStore = $("#inviteStore").val();
		doctorList();
	});
//点击清除按钮
	$("#doctorSearchClearData").click(function(){
		searchHospitalId="";
		searchSectionId="";
		searchUserName="";
		inviteStore = "";
		$("#doctorInfoSearchHos").val("");
		$("#doctorInfoSearchTechOffice").val("");
		$("#doctorInfoSearchName").val("");
		$("#inviteStore").val("");
		doctorList();
	});
//	点击医生身份选择时机构弹框消失
$("#addDoctorInfoUserInfo").click(function(){
	$("#addDoctorInfoDeptLay").fadeOut();
});
$("#changeDoctorInfoUserInfo").click(function(){
	$("#changeDoctorInfoDeptLay").fadeOut();
});
//联系电话失焦关联账号
$(document).on('blur','#addDoctorInfoDocTel',function(){
	if($("#addDoctorInfoDocUserCode").val().trim()==""||$("#addDoctorInfoDocUserCode").val().trim()==null){
		$("#addDoctorInfoDocUserCode").val($("#addDoctorInfoDocTel").val().trim());
	}
});
	</script>
</html>